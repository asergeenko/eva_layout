# –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–æ–≤—Ä–∏–∫–æ–≤

## –û–±–∑–æ—Ä

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, —Å–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π **—É–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º**, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è.

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üöÄ –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (`improved_packing.py`)
- **No-Fit Polygon –ø–æ–¥—Ö–æ–¥—ã** - –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞** - —É—á–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è "–º–µ—Ä—Ç–≤—ã—Ö –∑–æ–Ω" –∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—ã, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ –ø–ª–æ—â–∞–¥–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ–∑–∏—Ü–∏–π** - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —É–∂–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **–û—Ü–µ–Ω–∫–∞ waste penalty** - —à—Ç—Ä–∞—Ñ—ã –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π

### ‚ö° –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏  
- **Bottom-left –∞–ª–≥–æ—Ä–∏—Ç–º** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤** - 0¬∞, 90¬∞, 180¬∞, 270¬∞
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ** - —Ö–æ—Ä–æ—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –ê–ª–≥–æ—Ä–∏—Ç–º | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –†–∞–∑–º–µ—â–µ–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|----------|------------------|------------|---------------|
| –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π | ~25 —Å–µ–∫ | 155/156 (99.4%) | 28 –ª–∏—Å—Ç–æ–≤ |
| –£–ª—É—á—à–µ–Ω–Ω—ã–π | ~2+ –º–∏–Ω | –í–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è | –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏** - –∫–æ–≥–¥–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –≤–∞–∂–µ–Ω
- **–ù–µ–±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã** - –¥–æ 50-100 –∫–æ–≤—Ä–∏–∫–æ–≤  
- **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–¥–∞—á–∏** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- **–°–ª–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã** - L-–æ–±—Ä–∞–∑–Ω—ã–µ, —Å –≤—ã—Ä–µ–∑–∞–º–∏ –∏ —Ç.–¥.

### ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏** - –≥–¥–µ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã** - —Å–æ—Ç–Ω–∏ –∫–æ–≤—Ä–∏–∫–æ–≤
- **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
python enable_improved_packing.py status
```

### –í–∫–ª—é—á–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
```bash
python enable_improved_packing.py enable
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
```bash
python enable_improved_packing.py disable
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```python
# –í –∫–æ–¥–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É
from layout_optimizer import USE_IMPROVED_PACKING_BY_DEFAULT

# –í—Ä–µ–º–µ–Ω–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏
import layout_optimizer
layout_optimizer.USE_IMPROVED_PACKING_BY_DEFAULT = True

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
placed_layouts, unplaced = bin_packing_with_inventory(carpets, sheets)
```

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
python demo_improved_packing.py
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –Ω–∞–±–æ—Ä–µ –∫–æ–≤—Ä–∏–∫–æ–≤.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã:
- `AdvancedCarpetPacker` - –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- `improved_bin_packing()` - —Ñ—É–Ω–∫—Ü–∏—è-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- `max_candidates = 50` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- `step_size = adaptive` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à–∞–≥–∞ —Å–µ—Ç–∫–∏
- Monte Carlo –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏

### –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:
- **Bottom-left –±–æ–Ω—É—Å** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∏–∂–Ω–µ–º—É –ª–µ–≤–æ–º—É —É–≥–ª—É
- **–ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å** - –±–æ–Ω—É—Å –∑–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Ä—è–¥–æ–º —Å –¥—Ä—É–≥–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏  
- **Waste penalty** - —à—Ç—Ä–∞—Ñ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —É–∑–∫–∏—Ö –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –∑–æ–Ω

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –í–∫–ª—é—á–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Å–æ–±–æ –≤–∞–∂–Ω—ã—Ö –∑–∞–¥–∞—á –≥–¥–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è.

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —É–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç 99.4% —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.